---
title: 百度地图的标注与连线
date: 2018-03-15 17:23:51
categories: [技术向]
tags: [百度地图,Vue.js,JavaScript]
---

> 在 *Vue.js* 中调用百度地图

# 实例化地图

- 在百度开发者中心拿到 *AK*

- 在 *index.html* 中插入
```
<script type="text/javascript" src="http://api.map.baidu.com/api?v=3.0&ak=拿到的AK"></script>
```

- 就可以在组件中实例化 *BMap* 对象了
```
this.map = new BMap.Map('mapContainer')
```

- 然后初始化地图
```
this.map.centerAndZoom( new BMap.Point([123, 44]), 16 )
```



# 在地图上标点


```
// data
  data () {
    return {
      AK: bd_ak,      // 百度地图AK
      initParams: {   //初始设置
        position: [114.399342, 30.491234],
        zoom: 17
      },
      map: null,      // 保存地图实例
      locations: [],  // 存各点位置
      labels: [],     // 存各点的文本信息

      markerOption: { // 标记点样式参数

      },
      polylineOption: { // 连线样式参数
        strokeColor: 'black',
        strokeWeight: '5',  // 单位 px
        strokeOpacity: '0.5',
        strokeStyle: 'dashed',  // 样式 = solid or dashed
      },
    }
  }
```
----------


- 在实例化完之后把 *Marker* & *Label* 加入 *map* 中


- [百度地图-JavaScript API 3.0-类参考](http://lbsyun.baidu.com/cms/jsapi/reference/jsapi_reference_3_0.html)





```
  // 标记加入地图
  this.locations.map((loc, i) => {
    // 将坐标转为百度地图坐标
    let point = new BMap.Point(...loc);
    // 标记出红点
    this.map.addOverlay(new BMap.Marker(point, this.markerOption));
    // 标记出时间
    let label = new BMap.Label(this.labels[i], {
        position: point,
        offset: new BMap.Size(15, -30) // 位置偏移量 x & -y
      });
    label.setStyle({// 文本样式
      fontSize: '1em',
      fontWeight: '600',
      color: 'red',
      border: '2px dashed gray',
      backgroundColor: 'transparent',
    });
    this.map.addOverlay(label);
  });
```



-----------



# 连接所有标注点

- *this.polylineOption* 为样式参数 ( Object )


```
let points = this.locations.map(loc => new BMap.Point(...loc));

let polyline = new BMap.Polyline(points, this.polylineOption);

this.map.addOverlay(polyline);
```


-----------------


这样就OK了

但这只是某个项目中的一部分 (●︿●)

基本用法就这样了（溜